(function(){"use strict";var e={9624:function(e,t,s){var a=s(6848),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-header",{staticClass:"app-header",attrs:{height:"60px"}},[t("div",{staticClass:"header-content"},[t("h1",{staticClass:"app-title"},[e._v("动态接口生成工具")]),t("div",{staticClass:"header-actions"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.refreshData}},[e._v("刷新")])],1)])]),t("el-container",{staticClass:"app-container"},[t("el-aside",{staticClass:"app-aside-left",attrs:{width:"300px"}},[t("router-view",{attrs:{name:"left"}})],1),t("el-main",{staticClass:"app-main"},[t("router-view",{attrs:{name:"main"}})],1),t("el-aside",{staticClass:"app-aside-right",attrs:{width:"400px"}},[t("router-view",{attrs:{name:"right"}})],1)],1)],1)},i=[],n={name:"App",data(){return{}},methods:{refreshData(){this.$emit("refresh")}}},o=n,l=s(1656),c=(0,l.A)(o,r,i,!1,null,null,null),u=c.exports,d=s(6178),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-upload-view"},[t("div",{staticClass:"view-header"},[t("h3",[e._v("文件管理")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.showUploadDialog=!0}}},[t("i",{staticClass:"el-icon-upload"}),e._v(" 上传文件 ")])],1),t("el-dialog",{attrs:{title:"上传接口文档",visible:e.showUploadDialog,width:"500px"},on:{"update:visible":function(t){e.showUploadDialog=t},close:e.resetUploadForm}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"/api/files/upload","on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"before-upload":e.beforeUpload,multiple:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 支持上传任意格式的文件，单文件大小不超过10MB ")])])],1),t("div",{staticClass:"file-list"},[0===e.files.length?t("el-empty",{attrs:{description:"暂无上传的文件"}}):e._e(),e._l(e.files,function(s){return t("el-card",{key:s.id,staticClass:"file-card",on:{dblclick:function(t){return e.selectFile(s)}}},[t("div",{staticClass:"file-info"},[t("div",{staticClass:"file-name"},[e._v(e._s(s.filename))]),t("div",{staticClass:"file-meta"},[t("span",{staticClass:"file-type"},[e._v(e._s(s.file_type))]),t("span",{staticClass:"file-size"},[e._v(e._s(e.formatFileSize(s.size)))]),t("span",{staticClass:"file-time"},[e._v(e._s(e.formatDateTime(s.uploaded_at)))])])]),t("div",{staticClass:"file-actions"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectFile(s)}}},[t("i",{staticClass:"el-icon-folder-opened"}),e._v(" 查看 ")]),t("el-button",{attrs:{size:"mini",type:"success",disabled:s.parsed},on:{click:function(t){return e.generateInterfaces(s)}}},[t("i",{staticClass:"el-icon-document"}),e._v(" 生成接口 ")])],1)])})],2)],1)},f=[],m={name:"FileUploadView",data(){return{showUploadDialog:!1,files:[]}},created(){this.loadFiles()},methods:{async loadFiles(){try{const e=await this.$axios.get("/api/files");this.files=e.data,this.$store.commit("SET_FILES",e.data)}catch(e){this.$message.error("加载文件列表失败")}},resetUploadForm(){},beforeUpload(e){const t=e.size/1024/1024;return!(t>10)||(this.$message.error("文件大小不能超过10MB"),!1)},handleUploadSuccess(){this.$message.success("文件上传成功"),this.loadFiles()},handleUploadError(){this.$message.error("文件上传失败")},formatFileSize(e){return null==e||isNaN(e)||e<0?"0 B":e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":(e/1048576).toFixed(2)+" MB"},formatDateTime(e){if(!e)return"未上传";const t=new Date(e);return isNaN(t.getTime())?"无效日期":t.toLocaleString()},selectFile(e){this.$store.commit("SET_CURRENT_FILE",e),this.$store.dispatch("loadInterfaces",e.id)},generateInterfaces(){this.$message.info("生成接口功能开发中")}}},h=m,_=(0,l.A)(h,p,f,!1,null,"63b7087e",null),v=_.exports,g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"interface-list-view"},[t("div",{staticClass:"view-header"},[t("h3",[e._v("接口列表")]),t("div",{staticClass:"view-actions"},[t("el-select",{attrs:{placeholder:"请求方式",clearable:"",size:"small"},on:{change:e.handleFilterChange},model:{value:e.filterMethod,callback:function(t){e.filterMethod=t},expression:"filterMethod"}},[t("el-option",{attrs:{label:"GET",value:"GET"}}),t("el-option",{attrs:{label:"POST",value:"POST"}}),t("el-option",{attrs:{label:"PUT",value:"PUT"}}),t("el-option",{attrs:{label:"DELETE",value:"DELETE"}}),t("el-option",{attrs:{label:"PATCH",value:"PATCH"}})],1),t("el-input",{attrs:{placeholder:"搜索接口名称或路径",size:"small","prefix-icon":"el-icon-search",clearable:""},on:{input:e.handleSearch},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}})],1)]),t("div",{staticClass:"interface-list"},[0===e.filteredInterfaces.length?t("el-empty",{attrs:{description:"暂无接口数据"}}):e._e(),e._l(e.filteredInterfaces,function(s){return t("el-card",{key:s.id,staticClass:"interface-card",on:{dblclick:function(t){return e.selectInterface(s)}}},[t("div",{staticClass:"interface-header"},[t("div",{staticClass:"interface-method",class:"method-"+s.method.toLowerCase()},[e._v(" "+e._s(s.method)+" ")]),t("div",{staticClass:"interface-name"},[e._v(e._s(s.name))])]),t("div",{staticClass:"interface-path"},[e._v(e._s(s.path))]),s.description?t("div",{staticClass:"interface-description"},[e._v(" "+e._s(s.description)+" ")]):e._e(),t("div",{staticClass:"interface-actions"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectInterface(s)}}},[t("i",{staticClass:"el-icon-view"}),e._v(" 查看 ")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.generateInterface(s)}}},[t("i",{staticClass:"el-icon-rocket"}),e._v(" 生成服务 ")])],1)])})],2)])},b=[],C={name:"InterfaceListView",data(){return{filterMethod:"",searchKeyword:"",interfaces:[]}},computed:{filteredInterfaces(){return this.interfaces.filter(e=>{if(this.filterMethod&&e.method!==this.filterMethod)return!1;if(this.searchKeyword){const t=this.searchKeyword.toLowerCase();return e.name.toLowerCase().includes(t)||e.path.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)}return!0})}},created(){this.loadInterfaces(),this.$store.watch(e=>e.interfaces,e=>{this.interfaces=e},{deep:!0}),this.$store.watch(e=>e.currentFile,e=>{e&&this.$store.dispatch("loadInterfaces",e.id)})},methods:{async loadInterfaces(){try{const e=this.$store.state.currentFile;await this.$store.dispatch("loadInterfaces",e?e.id:null),this.interfaces=this.$store.state.interfaces}catch(e){this.$message.error("加载接口列表失败")}},handleFilterChange(){},handleSearch(){},selectInterface(e){this.$store.commit("SET_CURRENT_INTERFACE",e),this.$store.dispatch("loadInterfaceDetail",e.id),this.$store.dispatch("loadMockConfig",e.id),this.$store.dispatch("loadRequestLogs",e.id),this.$router.push(`/interface/${e.id}`)},async generateInterface(e){try{const t=await this.$axios.post(`/interfaces/generate/${e.id}`);this.$message.success(t.data.message)}catch(t){this.$message.error("生成接口服务失败")}}}},y=C,w=(0,l.A)(y,g,b,!1,null,"4a616737",null),F=w.exports,k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"interface-detail-view"},[e.currentInterface?t("div",{staticClass:"view-header"},[t("h3",[e._v(e._s(e.currentInterface.name))]),t("div",{staticClass:"interface-basic-info"},[t("span",{staticClass:"interface-method",class:"method-"+e.currentInterface.method.toLowerCase()},[e._v(" "+e._s(e.currentInterface.method)+" ")]),t("span",{staticClass:"interface-path"},[e._v(e._s(e.currentInterface.path))])])]):t("div",{staticClass:"no-data"},[t("el-empty",{attrs:{description:"请选择一个接口查看详情"}})],1),e.currentInterface?t("div",{staticClass:"detail-content"},[t("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"接口信息",name:"info"}},[t("el-descriptions",{attrs:{column:1,border:""}},[t("el-descriptions-item",{attrs:{label:"接口名称"}},[e._v(e._s(e.currentInterface.name))]),t("el-descriptions-item",{attrs:{label:"请求方式"}},[e._v(e._s(e.currentInterface.method))]),t("el-descriptions-item",{attrs:{label:"接口路径"}},[e._v(e._s(e.currentInterface.path))]),e.currentInterface.description?t("el-descriptions-item",{attrs:{label:"接口描述"}},[e._v(" "+e._s(e.currentInterface.description)+" ")]):e._e(),t("el-descriptions-item",{attrs:{label:"所属文件"}},[e._v(e._s(e.currentFile?.filename||"未知文件"))])],1)],1),t("el-tab-pane",{attrs:{label:"请求参数",name:"params"}},[e.interfaceParams.length>0?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.interfaceParams,stripe:""}},[t("el-table-column",{attrs:{prop:"name",label:"参数名",width:"150"}}),t("el-table-column",{attrs:{prop:"param_type",label:"参数类型",width:"150"}}),t("el-table-column",{attrs:{prop:"required",label:"是否必填",width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.required?t("el-tag",{attrs:{type:"success"}},[e._v("必填")]):t("el-tag",{attrs:{type:"info"}},[e._v("可选")])]}}],null,!1,3592506672)}),t("el-table-column",{attrs:{prop:"description",label:"描述"}}),t("el-table-column",{attrs:{prop:"example",label:"示例值"}})],1):t("el-empty",{attrs:{description:"暂无请求参数"}})],1),t("el-tab-pane",{attrs:{label:"响应参数",name:"responses"}},[e.interfaceResponses.length>0?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.interfaceResponses,stripe:""}},[t("el-table-column",{attrs:{prop:"name",label:"字段名",width:"150"}}),t("el-table-column",{attrs:{prop:"response_type",label:"字段类型",width:"150"}}),t("el-table-column",{attrs:{prop:"description",label:"描述"}}),t("el-table-column",{attrs:{prop:"example",label:"示例值"}})],1):t("el-empty",{attrs:{description:"暂无响应参数"}})],1),t("el-tab-pane",{attrs:{label:"Mock配置",name:"mock"}},[t("el-form",{attrs:{model:e.mockForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"启用Mock"}},[t("el-switch",{model:{value:e.mockForm.enabled,callback:function(t){e.$set(e.mockForm,"enabled",t)},expression:"mockForm.enabled"}})],1),t("el-form-item",{attrs:{label:"默认生成条数"}},[t("el-input-number",{attrs:{min:1,max:1e3,step:1},model:{value:e.mockForm.default_count,callback:function(t){e.$set(e.mockForm,"default_count",t)},expression:"mockForm.default_count"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.updateMockConfig}},[e._v("保存配置")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"发送请求",name:"request"}},[t("el-form",{attrs:{model:e.requestForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"请求参数"}},[t("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入JSON格式的请求参数"},model:{value:e.requestForm.params,callback:function(t){e.$set(e.requestForm,"params",t)},expression:"requestForm.params"}})],1),t("el-form-item",{attrs:{label:"Mock条数"}},[t("el-input-number",{attrs:{min:1,max:1e3,step:1},model:{value:e.requestForm.mock_count,callback:function(t){e.$set(e.requestForm,"mock_count",t)},expression:"requestForm.mock_count"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.sending},on:{click:e.sendRequest}},[e._v("发送请求")]),t("el-button",{on:{click:e.resetRequestForm}},[e._v("重置")])],1)],1),e.responseResult?t("div",{staticClass:"response-result"},[t("h4",[e._v("响应结果")]),t("el-divider"),t("div",{staticClass:"response-status",class:0===e.responseResult.code?"status-success":"status-error"},[t("span",{staticClass:"status-code"},[e._v(e._s(e.responseResult.code))]),t("span",{staticClass:"status-message"},[e._v(e._s(e.responseResult.message))])]),t("div",{staticClass:"response-data"},[t("el-input",{attrs:{type:"textarea",rows:10,readonly:"",placeholder:"响应数据"},model:{value:e.responseResultStr,callback:function(t){e.responseResultStr=t},expression:"responseResultStr"}})],1)],1):e._e()],1),t("el-tab-pane",{attrs:{label:"请求日志",name:"logs"}},[t("div",{staticClass:"log-list"},[0===e.requestLogs.length?t("el-empty",{attrs:{description:"暂无请求日志"}}):t("el-timeline",e._l(e.requestLogs,function(s){return t("el-timeline-item",{key:s.id,attrs:{timestamp:e.formatDateTime(s.request_time)}},[t("div",{staticClass:"log-item"},[t("div",{staticClass:"log-header"},[t("span",{staticClass:"log-method",class:"method-"+s.method.toLowerCase()},[e._v(e._s(s.method))]),t("span",{staticClass:"log-path"},[e._v(e._s(s.path))]),t("span",{staticClass:"log-status",class:200===s.response_status?"status-success":"status-error"},[e._v(" "+e._s(s.response_status)+" ")]),t("span",{staticClass:"log-time"},[e._v(e._s((s.execution_time||0).toFixed(2))+"ms")])]),s.params?t("div",{staticClass:"log-content"},[t("div",{staticClass:"log-title"},[e._v("请求参数:")]),t("pre",[e._v(e._s(s.params))])]):e._e(),s.response_body?t("div",{staticClass:"log-content"},[t("div",{staticClass:"log-title"},[e._v("响应结果:")]),t("pre",[e._v(e._s(s.response_body))])]):e._e()])])}),1)],1)])],1)],1):e._e()])},I=[],$={name:"InterfaceDetailView",data(){return{activeTab:"info",sending:!1,responseResult:null,responseResultStr:"",currentInterface:null,currentFile:null,interfaceParams:[],interfaceResponses:[],requestLogs:[],mockForm:{enabled:!0,default_count:10},requestForm:{params:"{}",mock_count:10}}},created(){this.$store.watch(e=>e.currentInterface,e=>{this.currentInterface=e,e&&this.loadInterfaceDetail(e.id)},{deep:!0}),this.$store.watch(e=>e.currentFile,e=>{this.currentFile=e},{deep:!0}),this.$store.watch(e=>e.requestLogs,e=>{this.requestLogs=e},{deep:!0})},methods:{async loadInterfaceDetail(e){try{const t=await this.$axios.get(`/api/interfaces/${e}/params`);this.interfaceParams=t.data;const s=await this.$axios.get(`/api/interfaces/${e}/responses`);this.interfaceResponses=s.data;const a=await this.$axios.get(`/api/interfaces/${e}/mock-config`);this.mockForm=a.data}catch(t){console.error("加载接口详情失败:",t)}},async updateMockConfig(){try{await this.$axios.put(`/api/interfaces/${this.currentInterface.id}/mock-config`,this.mockForm),this.$message.success("Mock配置更新成功")}catch(e){this.$message.error("Mock配置更新失败")}},async sendRequest(){try{this.sending=!0,this.responseResult=null,this.responseResultStr="";const t=`/api/dynamic${this.currentInterface.path}`;let s={};try{s=JSON.parse(this.requestForm.params)}catch(e){return this.$message.error("请求参数格式错误，请输入JSON格式"),void(this.sending=!1)}const a={params:s,mock_count:this.requestForm.mock_count},r=await this.$axios({method:this.currentInterface.method.toLowerCase(),url:t,data:a,headers:{"Content-Type":"application/json"}});this.responseResult=r.data,this.responseResultStr=JSON.stringify(r.data,null,2),this.$message.success("请求发送成功")}catch(t){this.$message.error("请求发送失败"),console.error("发送请求失败:",t)}finally{this.sending=!1}},resetRequestForm(){this.requestForm={params:"{}",mock_count:10},this.responseResult=null,this.responseResultStr=""},formatDateTime(e){const t=new Date(e);return t.toLocaleString()}}},S=$,E=(0,l.A)(S,k,I,!1,null,"18f61f46",null),T=E.exports;a["default"].use(d.Ay);const x=[{path:"/",name:"home",components:{left:v,main:F,right:T}},{path:"/interface/:id",name:"interface-detail",components:{left:v,main:F,right:T},props:{right:!0}}],R=new d.Ay({mode:"history",base:"/",routes:x});var L=R,q=s(3518);a["default"].use(q.Ay);var O=new q.Ay.Store({state:{files:[],currentFile:null,interfaces:[],currentInterface:null,requestLogs:[],mockConfig:null},getters:{getFiles:e=>e.files,getCurrentFile:e=>e.currentFile,getInterfaces:e=>e.interfaces,getCurrentInterface:e=>e.currentInterface,getRequestLogs:e=>e.requestLogs,getMockConfig:e=>e.mockConfig},mutations:{SET_FILES(e,t){e.files=t},SET_CURRENT_FILE(e,t){e.currentFile=t},ADD_FILE(e,t){e.files.push(t)},SET_INTERFACES(e,t){e.interfaces=t},SET_CURRENT_INTERFACE(e,t){e.currentInterface=t},ADD_INTERFACE(e,t){e.interfaces.push(t)},SET_REQUEST_LOGS(e,t){e.requestLogs=t},ADD_REQUEST_LOG(e,t){e.requestLogs.unshift(t)},SET_MOCK_CONFIG(e,t){e.mockConfig=t}},actions:{async loadFiles({commit:e}){try{const t=await this._vm.$axios.get("/api/files");e("SET_FILES",t.data)}catch(t){console.error("加载文件列表失败:",t)}},async loadInterfaces({commit:e},t=null){try{const s=t?`/api/interfaces?file_id=${t}`:"/api/interfaces",a=await this._vm.$axios.get(s);e("SET_INTERFACES",a.data)}catch(s){console.error("加载接口列表失败:",s)}},async loadInterfaceDetail({commit:e},t){},async loadRequestLogs({commit:e},t=null){try{e("SET_REQUEST_LOGS",[])}catch(s){console.error("加载请求日志失败:",s)}},async loadMockConfig({commit:e},t){try{e("SET_MOCK_CONFIG",null)}catch(s){console.error("加载Mock配置失败:",s)}}},modules:{}}),D=s(9143),M=s.n(D),U=s(4373);U.A.defaults.baseURL="/api",a["default"].prototype.$axios=U.A,a["default"].use(M()),a["default"].config.productionTip=!1,new a["default"]({router:L,store:O,render:e=>e(u)}).$mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a](i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,a,r,i){if(!a){var n=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],i=e[u][2];for(var o=!0,l=0;l<a.length;l++)(!1&i||n>=i)&&Object.keys(s.O).every(function(e){return s.O[e](a[l])})?a.splice(l--,1):(o=!1,i<n&&(n=i));if(o){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,r,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,i,n=a[0],o=a[1],l=a[2],c=0;if(n.some(function(t){return 0!==e[t]})){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var u=l(s)}for(t&&t(a);c<n.length;c++)i=n[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},a=self["webpackChunkinterface_generator_frontend"]=self["webpackChunkinterface_generator_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(9624)});a=s.O(a)})();
//# sourceMappingURL=app.fb83f3b9.js.map