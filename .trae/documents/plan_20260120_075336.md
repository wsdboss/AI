## 自动解决端口冲突的改进方案

### 1. 问题分析
目前的端口处理逻辑是固定使用配置文件中的端口或命令行参数指定的端口，当端口被占用时，Flask应用会抛出错误并退出，需要用户手动解决。

### 2. 改进方案
设计一个自动检测和解决端口冲突的机制，让应用能够：
- 检测指定端口是否可用
- 如果端口被占用，自动寻找下一个可用端口
- 使用找到的可用端口启动应用
- 确保所有输出和功能使用正确的端口

### 3. 具体实现

#### 3.1 添加端口可用性检测函数
- 在`simple_app.py`中添加`is_port_available()`函数，用于检测指定端口是否可用
- 使用`socket`库尝试绑定端口，如果成功则表示端口可用，否则不可用

#### 3.2 修改应用启动逻辑
- 在解析命令行参数后，检测指定端口是否可用
- 如果端口不可用，从默认端口开始递增尝试，直到找到可用端口
- 更新`args.port`的值为找到的可用端口
- 确保所有使用`args.port`的地方（日志、控制台输出、浏览器打开等）都使用正确的端口

#### 3.3 核心代码修改
- 添加端口检测函数
- 修改应用启动前的端口处理逻辑
- 更新所有使用端口的地方

### 4. 预期效果
- 当用户运行exe文件时，应用会自动检测端口是否可用
- 如果端口被占用，自动寻找下一个可用端口
- 无需用户干预，应用可以正常启动
- 所有输出和功能都使用正确的端口

### 5. 实现步骤
1. 在`simple_app.py`中添加端口可用性检测函数
2. 修改应用启动逻辑，实现自动寻找可用端口
3. 更新所有使用端口的地方，确保使用正确的端口
4. 重新构建前端和后端，生成新的exe文件

### 6. 技术细节
- 使用`socket`库进行端口检测，效率高且可靠
- 从默认端口开始递增尝试，最多尝试100个端口
- 确保检测逻辑线程安全，避免竞态条件
- 保留命令行参数的优先级，允许用户显式指定端口

这个方案可以实现后台自动帮用户解决端口冲突，提升用户体验，无需用户手动干预。